<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>予約フォーム</title>
  <style>
    /* 基本的なスタイル */
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f8f8f8;
      color: #333;
      margin: 0;
      padding: 0;
    }
    h1 {
      text-align: center;
      color: #FFF;
      margin-top: 20px;
      background-color: #4CAF50;
      padding: 10px 0;
    }
    .title {
      font-size: 1.6em;
      color: #4CAF50;
      margin-bottom: 10px;
      text-align: center;
    }
    .date-container {
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
      padding-bottom: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .input-wrapper {
      margin: 10px;
    }
    .input-label {
      font-size: 1.2em;
      margin-bottom: 5px;
      display: block;
    }
    .input-select,
    .input-field,
    .input-textarea {
      font-size: 1em;
      padding: 10px;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 4px;
      background-color: #f9f9f9;
      transition: border-color 0.3s ease;
    }
    .input-select:focus,
    .input-field:focus,
    .input-textarea:focus {
      outline: none;
      border-color: #4CAF50;
      background-color: #fff;
    }
    button {
      padding: 12px;
      font-size: 1.5em;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      height: 100px;
    }
    button:hover {
      background-color: #45a049;
    }
    #other-input-container {
      display: none;
    }
  </style>
  
</head>

<body>
  

  <h1>OASIS予約フォーム</h1>

  <form id="reservationForm">
  <!-- 名前 -->
  <h2 class="title">予約者名</h2>
  <div class="date-container">
  <div class="input-wrapper">
    <label for="name" class="input-label">予約者名:</label>
    <input type="text" id="name" name="name" placeholder="オアシス太郎" class="input-field" required><br><br>
  </div>
  </div>

<!-- 希望1 -->
<h2 class="title">第1希望</h2>
<div class="date-container">
  <div class="input-wrapper">
    <label for="month1" class="input-label">月:</label>
    <select id="month1" name="month1" class="input-select" required>
      <option value="1">1月</option>
      <option value="2">2月</option>
      <option value="3">3月</option>
      <option value="4">4月</option>
      <option value="5">5月</option>
      <option value="6">6月</option>
      <option value="7">7月</option>
      <option value="8">8月</option>
      <option value="9">9月</option>
      <option value="10">10月</option>
      <option value="11">11月</option>
      <option value="12">12月</option>
    </select>
  </div>

  <div class="input-wrapper">
    <label for="day1" class="input-label">日:</label>
    <select id="day1" name="day1" class="input-select" required></select>
  </div>

  <div class="input-wrapper">
    <label for="time1" class="input-label">時間:</label>
    <select id="time1" name="time1" class="input-select" required>
      <option value="9:00">9:00</option>
      <option value="10:00">10:00</option>
      <option value="11:00">11:00</option>
      <option value="12:00">12:00</option>
      <option value="13:00">13:00</option>
      <option value="14:00">14:00</option>
      <option value="15:00">15:00</option>
      <option value="16:00">16:00</option>
      <option value="17:00">17:00</option>
      <option value="18:00">18:00</option>
    </select>
  </div>
</div>

<!-- 同様に希望2、希望3を追加 -->


<!-- 希望2 -->
<h2 class="title">第2希望</h2>
<div class="date-container">
  <div class="input-wrapper">
    <label for="month2" class="input-label">月:</label>
    <select id="month2" name="month2" class="input-select" required>
      <option value="1">1月</option>
      <option value="2">2月</option>
      <option value="3">3月</option>
      <option value="4">4月</option>
      <option value="5">5月</option>
      <option value="6">6月</option>
      <option value="7">7月</option>
      <option value="8">8月</option>
      <option value="9">9月</option>
      <option value="10">10月</option>
      <option value="11">11月</option>
      <option value="12">12月</option>
    </select>
  </div>

  <div class="input-wrapper">
    <label for="day2" class="input-label">日:</label>
    <select id="day2" name="day" class="input-select" required></select>
  </div>

  <div class="input-wrapper">
    <label for="time2" class="input-label">時間:</label>
    <select id="time2" name="time2" class="input-select" required>
      <option value="9:00">9:00</option>
      <option value="10:00">10:00</option>
      <option value="11:00">11:00</option>
      <option value="12:00">12:00</option>
      <option value="13:00">13:00</option>
      <option value="14:00">14:00</option>
      <option value="15:00">15:00</option>
      <option value="16:00">16:00</option>
      <option value="17:00">17:00</option>
      <option value="18:00">18:00</option>
    </select>
  </div>
</div>

<!-- 希望3 -->
<h2 class="title">第3希望</h2>
<div class="date-container">
  <div class="input-wrapper">
    <label for="month3" class="input-label">月:</label>
    <select id="month3" name="month3" class="input-select" required>
      <option value="1">1月</option>
      <option value="2">2月</option>
      <option value="3">3月</option>
      <option value="4">4月</option>
      <option value="5">5月</option>
      <option value="6">6月</option>
      <option value="7">7月</option>
      <option value="8">8月</option>
      <option value="9">9月</option>
      <option value="10">10月</option>
      <option value="11">11月</option>
      <option value="12">12月</option>
    </select>
  </div>

  <div class="input-wrapper">
    <label for="day3" class="input-label">日:</label>
    <select id="day3" name="day3" class="input-select" required></select>
  </div>

  <div class="input-wrapper">
    <label for="time3" class="input-label">時間:</label>
    <select id="time3" name="time3" class="input-select" required>
      <option value="9:00">9:00</option>
      <option value="10:00">10:00</option>
      <option value="11:00">11:00</option>
      <option value="12:00">12:00</option>
      <option value="13:00">13:00</option>
      <option value="14:00">14:00</option>
      <option value="15:00">15:00</option>
      <option value="16:00">16:00</option>
      <option value="17:00">17:00</option>
      <option value="18:00">18:00</option>
    </select>
  </div>
</div>


 <!-- メニュー -->
 <h2 class="title">メニュー選択:</h2>
 <div class="date-container">
   <div class="input-wrapper">
     <label for="menu" class="input-label">メニュー:</label>
     <select id="menu" class="input-select" onchange="toggleOtherInput()">
       <option value="カットエステ">カットエステ</option>
       <option value="カラーケア">カラーケア</option>
       <option value="ストレートケア">ストレートケア</option>
       <option value="トリートメントケア">トリートメントケア</option>
       <option value="パーマケア">パーマケア</option>
       <option value="その他のメニュー">その他メニュー</option>
     </select>
   </div>
 </div>

  <!-- "その他"メニュー -->
  <div id="other-input-container" class="input-wrapper" style="display: none;">
    <label for="その他のメニュー" class="input-label">その他のメニュー</label>
    <input type="text" id="その他のメニュー" class="input-field" placeholder="具体的にご記入してください">
  </div>

  <!-- スタッフ -->
  <h2 class="title">担当スタイリスト:</h2>
  <div class="date-container">
    <div class="input-wrapper">
      <label for="staff" class="input-label">スタイリスト:</label>
      <select id="staff" name="staff" class="input-select" required>
        <option value="指名なし">指定なし</option>
        <option value="岡崎仁渡 (ディレクター)">岡崎仁渡 (ディレクター)</option>
        <option value="岡崎菜月(チーフ)">岡崎菜月(チーフ)</option>
        
      </select>
    </div>
  </div>

   <!-- 電話番号 -->
   <h2 class="title">電話番号:</h2>
   <div class="date-container">
     <div class="input-wrapper">
       <label for="phone" class="input-label">電話番号:</label>
       <input type="tel" id="phone" name="phone" placeholder="電話番号" class="input-field" required>
     </div>
   </div>

  <!-- 備考 -->
  <h2 class="title">備考:</h2>
  <div class="date-container">
    <div class="input-wrapper">
      <label for="comments" class="input-label">ご要望・コメント:</label>
      <textarea id="comments" name="comments" class="input-field" rows="4" placeholder="ご要望があればご記入ください"></textarea>
    </div>
  </div>

  <!-- 送信ボタン -->
  <button onclick="submit">予約希望を送信</button>

</form>


<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/versions/2.22.3/sdk.js"></script>
<script>
  // 特定の日付の曜日を計算して、セレクトボックスに追加する関数
  function populateDays() {
    const select = document.getElementById('day1');
    const weekdays = ["日", "月", "火", "水", "木", "金", "土"];

    const today = new Date(); 
    const currentYear = today.getFullYear();
    const currentMonth = today.getMonth();
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate(); 

    // 1日からその月の最終日までを表示
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(currentYear, currentMonth, day); 
      const weekday = weekdays[date.getDay()];

      // optionタグを作成
      const option = document.createElement('option');
      option.value = `${currentYear}-${currentMonth + 1}-${day}`; 
      option.textContent = `${day} (${weekday})`; 

      // セレクトボックスに追加
      select.appendChild(option);
    }
  }

  // ページロード時にpopulateDaysを実行
  window.onload = populateDays;

  // 月と日の選択肢を制御する関数
  function updateDays(monthSelectId, daySelectId) {
    const month = document.getElementById(monthSelectId).value;
    const daySelect = document.getElementById(daySelectId);

    // 日付をリセット
    daySelect.innerHTML = '';

    // 月ごとに日数を制限
    let maxDays;
    switch (month) {
      case '2':
        maxDays = 28; 
        break;
      case '4':
      case '6':
      case '9':
      case '11':
        maxDays = 30; 
        break;
      default:
        maxDays = 31; 
    }

    // 日数の選択肢を作成
    for (let i = 1; i <= maxDays; i++) {
      const option = document.createElement("option");
      option.value = i;
      option.text = `${i}日`;
      daySelect.appendChild(option);
    }
  }

  // 月が変更された時に日付の選択肢を更新
  const monthSelectors = ['month1', 'month2', 'month3'];
  const daySelectors = ['day1', 'day2', 'day3'];

  monthSelectors.forEach((monthSelectorId, index) => {
    document.getElementById(monthSelectorId).addEventListener("change", function() {
      updateDays(monthSelectorId, daySelectors[index]);
    });

    // 初期化
    updateDays(monthSelectorId, daySelectors[index]);
  });

  // 「その他」選択時の表示制御
  function toggleOtherInput() {
    const menuSelect = document.getElementById("menu");
    const otherInputContainer = document.getElementById("other-input-container");
    otherInputContainer.style.display = menuSelect.value === "other" ? "block" : "none";
  }

  // LIFF SDK初期化（1回のみ）
  liff.init({ liffId: "2006595194-AkL3pQ0D" }).then(() => {
    // 送信ボタンがクリックされた時の処理
document.querySelector("button").addEventListener('click', function (event) {
  event.preventDefault();  // デフォルトのフォーム送信を防止

      // フォームから選択された内容を取得
      const name = document.getElementById('name').value;

      // 第1希望
      const month1 = document.getElementById('month1').value;
      const day1 = document.getElementById('day1').value;
      const time1 = document.getElementById('time1').value;

      // 第2希望
      const month2 = document.getElementById('month2').value;
      const day2 = document.getElementById('day2').value;
      const time2 = document.getElementById('time2').value;

      // 第3希望
      const month3 = document.getElementById('month3').value;
      const day3 = document.getElementById('day3').value;
      const time3 = document.getElementById('time3').value;

      // メニューとスタイリスト
      const menu = document.getElementById('menu').value;
      const staff = document.getElementById('staff').value;

// メニュー表示（「その他」が選ばれた場合は入力内容を使用）
  const selectedMenu = menu === "other" ? `その他（${otherMenu}）` : menu;
      // 備考（オプション）
      const comments = document.getElementById('comments').value;

      // メッセージ作成
      const message = 
`予約希望内容:
ご予約者名: ${name}
第1希望: ${month1}月 ${day1}日 ${time1}時
第2希望: ${month2}月 ${day2}日 ${time2}時
第3希望: ${month3}月 ${day3}日 ${time3}時
メニュー: ${menu}
スタイリスト: ${staff}
備考欄：${comments}
確認でき次第ご返信いたしますのでお待ちください！！`;

      // メッセージを送信
      liff.sendMessages([{
        type: 'text',
        text: message
      }]).then(() => {
        alert("予約内容が送信されました。");
        liff.closeWindow();
      }).catch((error) => {
        console.error("メッセージ送信に失敗しました: ", error);
      });
    });
  }).catch((error) => {
    console.error("LIFF初期化エラー: ", error);
  });
</script>



</body>
</html>
